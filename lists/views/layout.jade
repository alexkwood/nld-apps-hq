!!! 5
html
  head
    - if (typeof list != "undefined")
      title #{list.title} - #{listsAppTitle}
    - else
      title= listsAppTitle
    
    //-shared
    link(rel='stylesheet', href='/stylesheets/hq.css')
    
    //-lists (symlinked to root)
    link(rel='stylesheet', href='/stylesheets/lists.css')
    
    //- use a local copy when developing locally/offline
    - if (envId === 'local')
      script(src='#{listsBase}/javascripts/jquery.min.js');
    - else  
      script(src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js")

    //- no #{listsBase} here, listening to parent app (?)
    script(src="/socket.io/socket.io.js")
    script(src="#{listsBase}/javascripts/lists-client.js")

    //-pass current list Id to JS
    //-@todo extend this layout template only for lists.jade?
    - if (typeof list != "undefined")
      script
        // catch the loaded client app
        $(window).on('loaded-app', function(event, app){
          // pass back an event w/ list ID (initializes socket)
          $(window).trigger('watch-list', '#{list._id}');
        });
    
  body
    != appsHeader
    
  
    div#main
      h1= listsAppTitle

      - if (typeof title != "undefined")
        h2= title
    
      //- moved from index. for individual list, gets populated w/ socket messages. otherwise just from req.flash.
      div#messages-wrapper
        div#messages
          - if (typeof listsMessages != "undefined")
            - each message,type in listsMessages
              div.message(class=type)!= message
    
      != body

    div#footer
      | A proof of concept using <a href="http://nodejs.org">Node.js</a> with <a href="http://socket.io">Socket.io</a>.
      | By <a href="http://newleafdigital.com">Ben Buckman, New Leaf Digital</a>.
      | Code is on <a href="https://github.com/newleafdigital/interactive-shopping-list">Github</a>.
